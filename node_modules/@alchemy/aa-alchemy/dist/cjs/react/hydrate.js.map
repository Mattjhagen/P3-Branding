{"version":3,"file":"hydrate.js","sourceRoot":"","sources":["../../../src/react/hydrate.ts"],"names":[],"mappings":";AAAA,YAAY,CAAC;;;AAEb,iCAAkE;AAElE,qDAA+C;AAsB/C,SAAgB,OAAO,CAAC,KAAsC;IAC5D,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,YAAY,EAAE,GAAG,KAAK,CAAC;IAEjD,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,oBAAO,EAAC,MAAM,EAAE,YAAY,CAAC,CAAC;IAGlD,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC;QAC1B,OAAO,EAAE,CAAC;IACZ,CAAC;IAGD,MAAM,MAAM,GAAG,IAAA,cAAM,EAAC,IAAI,CAAC,CAAC;IAC5B,IAAA,iBAAS,EAAC,GAAG,EAAE;QACb,IAAI,CAAC,MAAM,CAAC,OAAO;YAAE,OAAO;QAC5B,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG;YAAE,OAAO;QAClC,OAAO,EAAE,CAAC;QACV,OAAO,GAAG,EAAE;YACV,MAAM,CAAC,OAAO,GAAG,KAAK,CAAC;QACzB,CAAC,CAAC;IAEJ,CAAC,EAAE,EAAE,CAAC,CAAC;IAEP,OAAO,QAAQ,CAAC;AAClB,CAAC;AAvBD,0BAuBC","sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, type PropsWithChildren } from \"react\";\nimport type { AlchemyAccountsConfig } from \"../config\";\nimport { hydrate } from \"../config/hydrate.js\";\nimport type { StoredState } from \"../config/store/types\";\n\nexport type HydrateProps = {\n  config: AlchemyAccountsConfig;\n  initialState?: StoredState;\n};\n\n/**\n * A react component that can be used to hydrate the client store with the provided initial state.\n * This method will use {@link hydrate} to hydrate the client store with the provided initial state if one is provided.\n * If ssr is set on the account config, then it will run the onMount function within a useEffect hook. Otherwise,\n * It will run onMount as soon as the compoonent is rendered.\n *\n * based on https://github.com/wevm/wagmi/blob/main/packages/react/src/hydrate.ts\n *\n * @param props component props containing the config and initial state as well as children to render\n * @param props.config the account config containing the client store\n * @param props.initialState optional param detailing the initial ClientState\n * @param props.children the children to render\n * @returns the children to render\n */\nexport function Hydrate(props: PropsWithChildren<HydrateProps>) {\n  const { children, config, initialState } = props;\n\n  const { onMount } = hydrate(config, initialState);\n\n  // Hydrate for Non-SSR\n  if (!config._internal.ssr) {\n    onMount();\n  }\n\n  // Hydrate for SSR\n  const active = useRef(true);\n  useEffect(() => {\n    if (!active.current) return;\n    if (!config._internal.ssr) return;\n    onMount();\n    return () => {\n      active.current = false;\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return children;\n}\n"]}