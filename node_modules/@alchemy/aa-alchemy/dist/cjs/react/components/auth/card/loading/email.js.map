{"version":3,"file":"email.js","sourceRoot":"","sources":["../../../../../../../src/react/components/auth/card/loading/email.tsx"],"names":[],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useAuthenticate } from \"../../../../hooks/useAuthenticate.js\";\nimport { useSignerStatus } from \"../../../../hooks/useSignerStatus.js\";\nimport { MailIllustration } from \"../../../../icons/mail.js\";\nimport { Button } from \"../../../button.js\";\nimport { PoweredBy } from \"../../../poweredby.js\";\nimport { useAuthContext, type AuthStep } from \"../../context.js\";\nimport { Spinner } from \"../../../../icons/spinner.js\";\nimport { ls } from \"../../../../strings.js\";\n\ninterface LoadingEmailProps {\n  context: Extract<AuthStep, { type: \"email_verify\" }>;\n}\n\n// eslint-disable-next-line jsdoc/require-jsdoc\nexport const LoadingEmail = ({ context }: LoadingEmailProps) => {\n  // yup, re-sent and resent. I'm not fixing it\n  const [emailResent, setEmailResent] = useState(false);\n  const { setAuthStep } = useAuthContext();\n  const { authenticate } = useAuthenticate({\n    onSuccess: () => {\n      setAuthStep({ type: \"complete\" });\n    },\n  });\n\n  useEffect(() => {\n    if (emailResent) {\n      // set the text back to \"Resend\" after 2 seconds\n      setTimeout(() => {\n        setEmailResent(false);\n      }, 2000);\n    }\n  }, [emailResent]);\n\n  return (\n    <div className=\"flex flex-col gap-5 items-center\">\n      <div className=\"flex flex-col items-center justify-center h-12 w-12\">\n        <MailIllustration />\n      </div>\n\n      <h3 className=\"font-semibold text-lg\">{ls.loadingEmail.title}</h3>\n      <p className=\"text-fg-secondary text-center text-sm\">\n        {ls.loadingEmail.verificationSent}\n        <br />\n        <span className=\"font-medium\">{context.email}</span>\n      </p>\n\n      <div className=\"flex flex-col w-full items-center gap-1\">\n        <div className=\"flex items-center justify-center py-2 gap-x-2\">\n          <p className=\"text-fg-tertiary text-xs\">\n            {ls.loadingEmail.emailNotReceived}\n          </p>\n          <Button\n            variant=\"link\"\n            className=\"text-xs font-normal underline\"\n            onClick={() => {\n              authenticate({\n                type: \"email\",\n                email: context.email,\n              });\n              setEmailResent(true);\n            }}\n          >\n            {emailResent ? ls.loadingEmail.resent : ls.loadingEmail.resend}\n          </Button>\n        </div>\n        <PoweredBy />\n      </div>\n    </div>\n  );\n};\n\ninterface CompletingEmailAuthProps {\n  context: Extract<AuthStep, { type: \"email_completing\" }>;\n}\n\n// eslint-disable-next-line jsdoc/require-jsdoc\nexport const CompletingEmailAuth = ({ context }: CompletingEmailAuthProps) => {\n  const { isConnected } = useSignerStatus();\n  const { setAuthStep } = useAuthContext();\n\n  useEffect(() => {\n    if (isConnected && context.createPasskeyAfter) {\n      setAuthStep({ type: \"passkey_create\" });\n    } else if (isConnected) {\n      setAuthStep({ type: \"complete\" });\n    }\n  }, [context.createPasskeyAfter, isConnected, setAuthStep]);\n\n  return (\n    <div className=\"flex flex-col gap-5 items-center\">\n      <div className=\"flex flex-col items-center justify-center h-12 w-12\">\n        <Spinner className=\"animate-spin\" />\n      </div>\n\n      <p className=\"text-fg-secondary text-center text-sm\">\n        {ls.completingEmail.body}\n      </p>\n\n      <PoweredBy />\n    </div>\n  );\n};\n"]}