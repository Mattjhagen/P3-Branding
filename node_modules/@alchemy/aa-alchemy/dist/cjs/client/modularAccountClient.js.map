{"version":3,"file":"modularAccountClient.js","sourceRoot":"","sources":["../../../src/client/modularAccountClient.ts"],"names":[],"mappings":";;;AAAA,sDAW8B;AAE9B,+BAMc;AACd,4CAA2D;AAC3D,0FAAuG;AACvG,iDAA8D;AAgCvD,KAAK,UAAU,iCAAiC,CACrD,MAAyC;IAEzC,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,gBAAgB,EAAE,GACxC,uCAA2B,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;IAE5C,MAAM,MAAM,GAAG,IAAA,2CAA4B,EAAC;QAC1C,KAAK;QACL,gBAAgB;KACjB,CAAC,CAAC;IAEH,MAAM,OAAO,GAAG,MAAM,IAAA,4CAA8B,EAAC;QACnD,SAAS,EAAE,IAAA,aAAM,EAAC,MAAM,CAAC;QACzB,GAAG,MAAM;KACV,CAAC,CAAC;IAEH,OAAO,IAAA,2EAA4C,EAAC;QAClD,GAAG,MAAM;QACT,MAAM;QACN,OAAO;QACP,IAAI;KACL,CAAC;SACC,MAAM,CAAC,qCAAuB,CAAC;SAC/B,MAAM,CAAC,kCAAoB,CAAC;SAC5B,MAAM,CAAC,iCAAmB,CAAC,CAAC;AACjC,CAAC;AAzBD,8EAyBC","sourcesContent":["import {\n  accountLoupeActions,\n  createMultiOwnerModularAccount,\n  multiOwnerPluginActions,\n  pluginManagerActions,\n  type AccountLoupeActions,\n  type CreateMultiOwnerModularAccountParams,\n  type LightAccount,\n  type MultiOwnerModularAccount,\n  type MultiOwnerPluginActions,\n  type PluginManagerActions,\n} from \"@alchemy/aa-accounts\";\nimport type { SmartAccountSigner } from \"@alchemy/aa-core\";\nimport {\n  custom,\n  type Chain,\n  type CustomTransport,\n  type HttpTransport,\n  type Transport,\n} from \"viem\";\nimport { AlchemyProviderConfigSchema } from \"../schema.js\";\nimport { createAlchemySmartAccountClientFromRpcClient } from \"./internal/smartAccountClientFromRpc.js\";\nimport { createAlchemyPublicRpcClient } from \"./rpcClient.js\";\nimport type {\n  AlchemySmartAccountClient,\n  AlchemySmartAccountClientConfig,\n} from \"./smartAccountClient\";\n\nexport type AlchemyModularAccountClientConfig<\n  TSigner extends SmartAccountSigner = SmartAccountSigner\n> = Omit<\n  CreateMultiOwnerModularAccountParams<HttpTransport, TSigner>,\n  \"transport\" | \"chain\"\n> &\n  Omit<\n    AlchemySmartAccountClientConfig<Transport, Chain, LightAccount<TSigner>>,\n    \"account\"\n  >;\n\nexport function createModularAccountAlchemyClient<\n  TSigner extends SmartAccountSigner = SmartAccountSigner\n>(\n  params: AlchemyModularAccountClientConfig<TSigner>\n): Promise<\n  AlchemySmartAccountClient<\n    CustomTransport,\n    Chain | undefined,\n    MultiOwnerModularAccount<TSigner>,\n    MultiOwnerPluginActions<MultiOwnerModularAccount<TSigner>> &\n      PluginManagerActions<MultiOwnerModularAccount<TSigner>> &\n      AccountLoupeActions<MultiOwnerModularAccount<TSigner>>\n  >\n>;\n\nexport async function createModularAccountAlchemyClient(\n  config: AlchemyModularAccountClientConfig\n): Promise<AlchemySmartAccountClient> {\n  const { chain, opts, ...connectionConfig } =\n    AlchemyProviderConfigSchema.parse(config);\n\n  const client = createAlchemyPublicRpcClient({\n    chain,\n    connectionConfig,\n  });\n\n  const account = await createMultiOwnerModularAccount({\n    transport: custom(client),\n    ...config,\n  });\n\n  return createAlchemySmartAccountClientFromRpcClient({\n    ...config,\n    client,\n    account,\n    opts,\n  })\n    .extend(multiOwnerPluginActions)\n    .extend(pluginManagerActions)\n    .extend(accountLoupeActions);\n}\n"]}