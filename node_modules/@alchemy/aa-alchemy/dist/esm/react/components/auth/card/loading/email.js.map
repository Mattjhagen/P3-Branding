{"version":3,"file":"email.js","sourceRoot":"","sources":["../../../../../../../src/react/components/auth/card/loading/email.tsx"],"names":[],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useAuthenticate } from \"../../../../hooks/useAuthenticate.js\";\nimport { useSignerStatus } from \"../../../../hooks/useSignerStatus.js\";\nimport { MailIllustration } from \"../../../../icons/mail.js\";\nimport { Button } from \"../../../button.js\";\nimport { PoweredBy } from \"../../../poweredby.js\";\nimport { useAuthContext, type AuthStep } from \"../../context.js\";\nimport { Spinner } from \"../../../../icons/spinner.js\";\nimport { ls } from \"../../../../strings.js\";\n\ninterface LoadingEmailProps {\n  context: Extract<AuthStep, { type: \"email_verify\" }>;\n}\n\n// eslint-disable-next-line jsdoc/require-jsdoc\nexport const LoadingEmail = ({ context }: LoadingEmailProps) => {\n  // yup, re-sent and resent. I'm not fixing it\n  const [emailResent, setEmailResent] = useState(false);\n  const { setAuthStep } = useAuthContext();\n  const { authenticate } = useAuthenticate({\n    onSuccess: () => {\n      setAuthStep({ type: \"complete\" });\n    },\n  });\n\n  useEffect(() => {\n    if (emailResent) {\n      // set the text back to \"Resend\" after 2 seconds\n      setTimeout(() => {\n        setEmailResent(false);\n      }, 2000);\n    }\n  }, [emailResent]);\n\n  return (\n    <div className=\"flex flex-col gap-5 items-center\">\n      <div className=\"flex flex-col items-center justify-center h-12 w-12\">\n        <MailIllustration />\n      </div>\n\n      <h3 className=\"font-semibold text-lg\">{ls.loadingEmail.title}</h3>\n      <p className=\"text-fg-secondary text-center text-sm\">\n        {ls.loadingEmail.verificationSent}\n        <br />\n        <span className=\"font-medium\">{context.email}</span>\n      </p>\n\n      <div className=\"flex flex-col w-full items-center gap-1\">\n        <div className=\"flex items-center justify-center py-2 gap-x-2\">\n          <p className=\"text-fg-tertiary text-xs\">\n            {ls.loadingEmail.emailNotReceived}\n          </p>\n          <Button\n            variant=\"link\"\n            className=\"text-xs font-normal underline\"\n            onClick={() => {\n              authenticate({\n                type: \"email\",\n                email: context.email,\n              });\n              setEmailResent(true);\n            }}\n          >\n            {emailResent ? ls.loadingEmail.resent : ls.loadingEmail.resend}\n          </Button>\n        </div>\n        <PoweredBy />\n      </div>\n    </div>\n  );\n};\n\ninterface CompletingEmailAuthProps {\n  context: Extract<AuthStep, { type: \"email_completing\" }>;\n}\n\n// eslint-disable-next-line jsdoc/require-jsdoc\nexport const CompletingEmailAuth = ({ context }: CompletingEmailAuthProps) => {\n  const { isConnected } = useSignerStatus();\n  const { setAuthStep } = useAuthContext();\n\n  useEffect(() => {\n    if (isConnected && context.createPasskeyAfter) {\n      setAuthStep({ type: \"passkey_create\" });\n    } else if (isConnected) {\n      setAuthStep({ type: \"complete\" });\n    }\n  }, [context.createPasskeyAfter, isConnected, setAuthStep]);\n\n  return (\n    <div className=\"flex flex-col gap-5 items-center\">\n      <div className=\"flex flex-col items-center justify-center h-12 w-12\">\n        <Spinner className=\"animate-spin\" />\n      </div>\n\n      <p className=\"text-fg-secondary text-center text-sm\">\n        {ls.completingEmail.body}\n      </p>\n\n      <PoweredBy />\n    </div>\n  );\n};\n"]}