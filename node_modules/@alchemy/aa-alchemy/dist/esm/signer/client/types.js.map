{"version":3,"file":"types.js","sourceRoot":"","sources":["../../../../src/signer/client/types.ts"],"names":[],"mappings":"","sourcesContent":["import type { Address } from \"@alchemy/aa-core\";\nimport type { TSignedRequest, getWebAuthnAttestation } from \"@turnkey/http\";\nimport type { Hex } from \"viem\";\n\nexport type CredentialCreationOptionOverrides = {\n  publicKey?: Partial<CredentialCreationOptions[\"publicKey\"]>;\n} & Pick<CredentialCreationOptions, \"signal\">;\n\n// [!region User]\nexport type User = {\n  email?: string;\n  orgId: string;\n  userId: string;\n  address: Address;\n  credentialId?: string;\n};\n// [!endregion User]\n\nexport type ExportWalletParams = {\n  iframeContainerId: string;\n  iframeElementId?: string;\n};\n\nexport type CreateAccountParams =\n  | {\n      type: \"email\";\n      email: string;\n      expirationSeconds?: number;\n      redirectParams?: URLSearchParams;\n    }\n  | {\n      type: \"passkey\";\n      username: string;\n      creationOpts?: CredentialCreationOptionOverrides;\n    };\n\nexport type EmailAuthParams = {\n  email: string;\n  expirationSeconds?: number;\n  targetPublicKey: string;\n  redirectParams?: URLSearchParams;\n};\n\nexport type SignupResponse = {\n  orgId: string;\n  userId?: string;\n  address?: Address;\n};\n\nexport type SignerRoutes = SignerEndpoints[number][\"Route\"];\nexport type SignerBody<T extends SignerRoutes> = Extract<\n  SignerEndpoints[number],\n  { Route: T }\n>[\"Body\"];\nexport type SignerResponse<T extends SignerRoutes> = Extract<\n  SignerEndpoints[number],\n  { Route: T }\n>[\"Response\"];\n\nexport type SignerEndpoints = [\n  {\n    Route: \"/v1/signup\";\n    Body:\n      | (Omit<EmailAuthParams, \"redirectParams\"> & { redirectParams?: string })\n      | {\n          passkey: {\n            challenge: string;\n            attestation: Awaited<ReturnType<typeof getWebAuthnAttestation>>;\n          };\n        };\n    Response: SignupResponse;\n  },\n  {\n    Route: \"/v1/whoami\";\n    Body: {\n      stampedRequest: TSignedRequest;\n    };\n    Response: User;\n  },\n  {\n    Route: \"/v1/auth\";\n    Body: Omit<EmailAuthParams, \"redirectParams\"> & { redirectParams?: string };\n    Response: {\n      orgId: string;\n    };\n  },\n  {\n    Route: \"/v1/lookup\";\n    Body: {\n      email: string;\n    };\n    Response: {\n      orgId: string | null;\n    };\n  },\n  {\n    Route: \"/v1/sign-payload\";\n    Body: {\n      stampedRequest: TSignedRequest;\n    };\n    Response: {\n      signature: Hex;\n    };\n  }\n];\n\nexport type AlchemySignerClientEvents = {\n  connected(user: User): void;\n  authenticating(): void;\n  connectedEmail(user: User, bundle: string): void;\n  connectedPasskey(user: User): void;\n  disconnected(): void;\n};\n\nexport type AlchemySignerClientEvent = keyof AlchemySignerClientEvents;\n\nexport type GetWebAuthnAttestationResult = {\n  attestation: Awaited<ReturnType<typeof getWebAuthnAttestation>>;\n  challenge: ArrayBuffer;\n  authenticatorUserId: ArrayBuffer;\n};\n"]}