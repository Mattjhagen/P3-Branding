"use strict";
Object.defineProperty(exports, Symbol.toStringTag, { value: "Module" });
const jsxRuntime = require("react/jsx-runtime");
const formCore = require("@tanstack/form-core");
const reactStore = require("@tanstack/react-store");
const rehackt = require("rehackt");
const useField = require("./useField.cjs");
const useIsomorphicLayoutEffect = require("./useIsomorphicLayoutEffect.cjs");
function useForm(opts) {
  const [formApi] = rehackt.useState(() => {
    const api = new formCore.FormApi(opts);
    api.Field = function APIField(props) {
      return /* @__PURE__ */ jsxRuntime.jsx(useField.Field, { ...props, form: api });
    };
    api.useField = (props) => useField.useField({ ...props, form: api });
    api.useStore = (selector) => {
      return reactStore.useStore(api.store, selector);
    };
    api.Subscribe = (props) => {
      return formCore.functionalUpdate(
        props.children,
        // eslint-disable-next-line react-hooks/rules-of-hooks
        reactStore.useStore(api.store, props.selector)
      );
    };
    return api;
  });
  useIsomorphicLayoutEffect.useIsomorphicLayoutEffect(formApi.mount, []);
  formApi.useStore((state) => state.isSubmitting);
  useIsomorphicLayoutEffect.useIsomorphicLayoutEffect(() => {
    formApi.update(opts);
  });
  return formApi;
}
exports.useForm = useForm;
//# sourceMappingURL=useForm.cjs.map
